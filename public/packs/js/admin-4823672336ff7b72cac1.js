(self.webpackChunkprsdigg=self.webpackChunkprsdigg||[]).push([[2328],{16487:function(e,t,n){"use strict";var r=n(98196),a=n.n(r),l=(n(43586),n(97183)),i=n(46829),c=n(57210),o=n(67294),u=n(73727),s=(n(10995),n(99210)),d=n(63392),m=n(89366),f=n(99008),p=n(2877),y=n(36928),E=n(63276),v=n(47218),h=n(10789),I=n(47438),g=n(75491),b=n(92570),Z=n(51984),A=n(57240),x=n(55035);function k(){return o.createElement(s.Z,{theme:"dark",mode:"inline"},o.createElement("div",{style:{height:"2rem",margin:"1rem",lineHeight:"2rem",textAlign:"center"}},"Admin"),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/"},o.createElement(d.Z,null),o.createElement("span",null,"Dashboard"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/users"},o.createElement(m.Z,null),o.createElement("span",null,"Users"))),o.createElement(s.Z.SubMenu,{key:"article",icon:o.createElement(f.Z,null),title:"Article"},o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/articles"},o.createElement("span",null,"Articles"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/article_snapshots"},o.createElement("span",null,"Article Snapshots")))),o.createElement(s.Z.SubMenu,{key:"pressone",icon:o.createElement(p.Z,null),title:"PRESSOne"},o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/prs_accounts"},o.createElement("span",null,"Accounts"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/prs_transactions"},o.createElement("span",null,"Transactions")))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/comments"},o.createElement(y.Z,null),o.createElement("span",null,"Comments"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/payments"},o.createElement(E.Z,null),o.createElement("span",null,"Payments"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/swap_orders"},o.createElement(v.Z,null),o.createElement("span",null,"Swap Orders"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/transfers"},o.createElement(h.Z,null),o.createElement("span",null,"Transfers"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/announcements"},o.createElement(I.Z,null),o.createElement("span",null,"Announcements"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/mixin_messages"},o.createElement(g.Z,null),o.createElement("span",null,"Messages"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/mixin_network_snapshots"},o.createElement(b.Z,null),o.createElement("span",null,"Snapshots"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/bonuses"},o.createElement(Z.Z,null),o.createElement("span",null,"Bonuses"))),o.createElement(s.Z.Item,null,o.createElement(u.rU,{to:"/balance"},o.createElement(A.Z,null),o.createElement("span",null,"Balance"))),o.createElement(s.Z.Item,null,o.createElement("a",{href:"/admin/logout"},o.createElement(x.Z,null),o.createElement("span",null,"Logout"))))}n(67167);var C=n(71577),S=(n(38319),n(86585)),w=(n(39200),n(32787)),T=(n(58481),n(48086)),O=n(78338),U=n(39387);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=l.Z.Content;function D(){var e=P((0,U.tIp)({update:function(e,t){var n=t.data.adminLogin.error;n?T.ZP.error(n):location.replace("/admin")}}),1)[0];return o.createElement(l.Z,{className:"layout"},o.createElement(N,{style:{display:"flex",minHeight:"100vh"}},o.createElement(S.Z,{onFinish:function(t){e({variables:{input:t}})},style:{width:300,margin:"auto"}},o.createElement(S.Z.Item,{name:"name",rules:[{required:!0,message:"Username"}]},o.createElement(w.Z,{prefix:o.createElement(m.Z,{style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})),o.createElement(S.Z.Item,{name:"password",rules:[{required:!0,message:"Password"}]},o.createElement(w.Z,{prefix:o.createElement(O.Z,{style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.createElement(S.Z.Item,null,o.createElement(C.Z,{loading:!1,type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))))}n(57973);var j=n(99683),B=n(5977),_=(n(13007),n(86627)),W=(n(945),n(57016)),L=(n(54602),n(47933)),R=(n(13816),n(37744)),K=(n(24228),n(27049)),q=(n(28610),n(75443)),F=(n(96498),n(11382));function $(){return o.createElement("div",{style:{width:"100%",padding:"2rem",textAlign:"center"}},o.createElement(F.Z,null))}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(){var e=(0,U.THH)(),t=e.data,n=e.loading,r=e.fetchMore,a=e.refetch,l=z((0,o.useState)(""),2),i=l[0],c=l[1],u=z((0,o.useState)("PLAIN_TEXT"),2),s=u[0],d=u[1],m=z((0,o.useState)(null),2),f=m[0],p=m[1],y=z((0,o.useState)(!1),2),E=y[0],v=y[1],h=z((0,U.EOW)({update:function(e,t){var n=t.data.adminCreateAnnouncement.error;n?T.ZP.error(n):(v(!1),T.ZP.success("Created!"),a())}}),1)[0],I=z((0,U.DkB)({update:function(e,t){var n=t.data.adminUpdateAnnouncement.error;n?T.ZP.error(n):(v(!1),T.ZP.success("updated!"),a())}}),1)[0],g=z((0,U.t4w)({update:function(e,t){var n=t.data.adminDeleteAnnouncement.error;n?T.ZP.error(n):(T.ZP.success("deleted!"),a())}}),1)[0],b=z((0,U.Tad)({update:function(e,t){var n=t.data.adminDeliverAnnouncement.error;n?T.ZP.error(n):(T.ZP.success("delivered!"),a())}}),1)[0],Z=z((0,U.K25)({update:function(e,t){var n=t.data.adminPreviewAnnouncement.error;n?T.ZP.error(n):(T.ZP.success("Check it in admin group!"),a())}}),1)[0];if(n)return o.createElement($,null);var A=t.adminAnnouncementConnection,x=A.nodes,k=A.pageInfo,S=k.hasNextPage,O=k.endCursor,P=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"messageType",key:"messageType",title:"messageType"},{dataIndex:"content",key:"content",render:function(e){return o.createElement("div",null,e)},title:"content"},{dataIndex:"state",key:"state",title:"state"},{dataIndex:"deliveredAt",key:"deliveredAt",render:function(e){return e||"-"},title:"deliveredAt"},{dataIndex:"actions",key:"actions",render:function(e,t){return o.createElement("span",null,o.createElement(q.Z,{title:"Are you sure to deliver message to all users?",onConfirm:function(){return b({variables:{input:{id:t.id}}})}},o.createElement("a",null,"Deliver")),o.createElement(K.Z,{type:"vertical"}),o.createElement(q.Z,{title:"Are you sure to deliver message to admin group for preview?",onConfirm:function(){return Z({variables:{input:{id:t.id}}})}},o.createElement("a",null,"Preview")),o.createElement(K.Z,{type:"vertical"}),o.createElement(q.Z,{title:"Are you sure to delete?",onConfirm:function(){return g({variables:{input:{id:t.id}}})}},o.createElement("a",null,"Delete")),o.createElement(K.Z,{type:"vertical"}),o.createElement("a",{onClick:function(){p(t),c(t.content),d(t.messageType),v(!0)}},"Edit"))},title:"Actions"}];return o.createElement("div",null,o.createElement(R.Z,{title:"Announcements"}),o.createElement("div",{style:{marginBottom:"1rem"}},o.createElement(C.Z,{type:"primary",onClick:function(){c(""),d("PLAIN_TEXT"),p(null),v(!0)}},"New"),o.createElement(W.Z,{title:f?"Edit":"New",closable:!1,visible:E,onCancel:function(){return v(!1)},onOk:function(){f?I({variables:{input:{id:f.id,content:i,messageType:s}}}):h({variables:{input:{content:i,messageType:s}}})}},o.createElement("div",null,o.createElement(w.Z.TextArea,{value:i,onChange:function(e){return c(e.currentTarget.value)},autoSize:{minRows:3,maxRows:10}})),o.createElement("div",null,o.createElement(L.ZP.Group,{value:s,onChange:function(e){return d(e.target.value)}},o.createElement(L.ZP,{value:"PLAIN_TEXT"},"Text"),o.createElement(L.ZP,{value:"PLAIN_POST"},"Post"))))),o.createElement(_.Z,{scroll:{x:!0},columns:P,dataSource:x,rowKey:"id",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:n,disabled:!S,onClick:function(){r({variables:{after:O}})}},S?"Load More":"No More")))}n(34892);var X=n(14277),G=(n(19793),n(51752)),J=(n(51872),n(19650)),Q=(n(75257),n(51890)),Y=(n(39412),n(4914)),ee=(n(25664),n(55241));function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e){var t=e.articleUuid,n=(0,U.dj8)({variables:{articleUuid:t}}),r=n.loading,a=n.data,l=n.fetchMore,i=te((0,U.I$h)(),2),c=i[0],s=i[1].loading;if(r)return o.createElement($,null);var d=a.adminArticleSnapshotConnection,m=d.nodes,f=d.pageInfo,p=f.hasNextPage,y=f.endCursor,E=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"article",key:"article",render:function(e,t){return o.createElement("span",null,t.article.author.name,":"," ",o.createElement(u.rU,{to:"/articles/"+t.articleUuid},t.article.title))},title:"Article"},{dataIndex:"state",key:"state",title:"State"},{dataIndex:"fileHash",key:"fileHash",render:function(e){return e?o.createElement(ee.Z,{content:e,className:"w-14 line-clamp-1"},e):"-"},title:"File Hash"},{dataIndex:"txId",key:"txId",render:function(e){return e?o.createElement(ee.Z,{content:e,className:"w-14 line-clamp-1"},e):"-"},title:"Tx ID"},{dataIndex:"signature",key:"signature",render:function(e,t){return null!=t&&t.signatureUrl?o.createElement("a",{href:t.signatureUrl,target:"_blank"},"Link"):"-"},title:"signature"},{dataIndex:"requestedAt",key:"requestedAt",render:function(e){return e||"-"},title:"requestedAt"},{dataIndex:"signedAt",key:"signedAt",render:function(e){return e||"-"},title:"signedAt"},{dataIndex:"createdAt",key:"createdAt",title:"CreatedAt"},{dataIndex:"actions",key:"actions",render:function(e,t){return o.createElement(q.Z,{title:"Are you sure to sign this snapshot?",disabled:"drafted"!==t.state||s,onConfirm:function(){return c({variables:{input:{id:t.id}}})}},o.createElement("span",{className:"drafted"===t.state||s?"cursor-pointer":"cursor-not-allowed text-gray-500"},"Sign"))},title:"Actions"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:E,dataSource:m,size:"small",rowKey:"id",pagination:!1}),o.createElement("div",{className:"mb-4 text-center"},o.createElement(C.Z,{type:"link",loading:r,disabled:!p,onClick:function(){l({variables:{after:y}})}},p?"Load More":"No More")))}var ae=n(2307);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e){var t=e.commentableId,n=e.commentableType,r=e.authorMixinId,a=(0,U.$n$)({variables:{commentableId:t,commentableType:n,authorMixinId:r}}),l=a.data,i=a.loading,c=a.fetchMore,u=a.refetch,s=le((0,U.dYE)({update:function(e,t){var n=t.data.error;n?T.ZP.error(n):(T.ZP.success("Successfully deleted!"),u())}}),2),d=s[0],m=s[1].loading,f=le((0,U.nF8)({update:function(e,t){var n=t.data.error;n?T.ZP.error(n):(T.ZP.success("Successfully recovered!"),u())}}),2),p=f[0],y=f[1].loading;if(i)return o.createElement($,null);var E=l.commentConnection,v=E.nodes,h=E.pageInfo,I=h.hasNextPage,g=h.endCursor,b=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"author",key:"author",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.author.avatarUrl}),t.author.name)},title:"Author"},{dataIndex:"content",key:"content",render:function(e){return o.createElement(ee.Z,{content:e},o.createElement("div",{style:{maxWidth:"100%"}},e?e.slice(0,140):"-"))},title:"content"},{dataIndex:"article",key:"article",render:function(e,t){return o.createElement("a",{href:"/articles/"+t.commentable.uuid,target:"_blank"},t.commentable.title)},title:"article"},{dataIndex:"createdAt",key:"createdAt",title:"CreatedAt"},{dataIndex:"deletedAt",key:"deletedAt",render:function(e){return o.createElement("span",null,e||"-")},title:"deletedAt"},{dataIndex:"actions",key:"actions",render:function(e,t){return o.createElement("span",null,t.deletedAt?o.createElement(q.Z,{title:"Are you sure to recover this comment?",onConfirm:function(){return p({variables:{input:{id:t.id}}})}},o.createElement(C.Z,{type:"link",disabled:y},"Recover")):o.createElement(q.Z,{title:"Are you sure to delete this comment?",onConfirm:function(){return d({variables:{input:{id:t.id}}})}},o.createElement(C.Z,{type:"link",disabled:m},"Delete")))},title:"Actions"}];return o.createElement("div",null,o.createElement(ae.Z,{scroll:{x:!0},columns:b,dataSource:v,rowKey:"id",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:i,disabled:!I,onClick:function(){c({variables:{after:g}})}},I?"Load More":"No More")))}var oe=o.createContext(null);var ue=o.createContext(null);function se(){return(0,o.useContext)(ue)}function de(e){var t=se().appId,n=e.userId,r=e.filter,a=void 0===r?"all":r,l=(0,U.oSn)({variables:{filter:a,userId:n}}),i=l.data,u=l.loading,s=l.fetchMore;if(u)return o.createElement($,null);var d=i.adminMixinNetworkSnapshotConnection,m=d.nodes,f=d.pageInfo,p=f.hasNextPage,y=f.endCursor,E=[{dataIndex:"traceId",key:"traceId",title:"traceId"},{dataIndex:"wallet",key:"wallet",render:function(e,n){return n.article?o.createElement("a",{href:"https://prsdigg.com/articles/"+n.article.uuid,target:"_blank"},n.article.title):n.userId===t?"PRSDigg":n.userId===c.TW?"4swap":n.userId},title:"Wallet"},{dataIndex:"opponent",key:"opponent",render:function(e,n){return n.opponent?o.createElement(J.Z,null,o.createElement(Q.C,{src:n.opponent.avatarUrl}),n.opponent.name,n.opponent.mixinId):n.opponentId===t?"PRSDigg":n.opponentId===c.TW?"4swap":n.opponentId||"MTG"},title:"Opponent"},{dataIndex:"amount",key:"amount",render:function(e,t){var n;return o.createElement(J.Z,null,o.createElement(Q.C,{src:null==(n=t.currency)?void 0:n.iconUrl}),o.createElement("span",null,e))},title:"amount"},{dataIndex:"processedAt",key:"processedAt",title:"processedAt"},{dataIndex:"createdAt",key:"createdAt",title:"createdAt"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:E,dataSource:m,rowKey:"traceId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:u,disabled:!p,onClick:function(){s({variables:{after:y}})}},p?"Load More":"No More")))}function me(e){var t=e.itemId,n=e.itemType,r=(0,U.eSn)({variables:{itemId:t,itemType:n}}),a=r.loading,l=r.data,i=r.fetchMore;if(a)return o.createElement($,null);var c=l.adminOrderConnection,u=c.nodes,s=c.pageInfo,d=s.hasNextPage,m=s.endCursor,f=[{dataIndex:"traceId",key:"traceId",title:"traceId"},{dataIndex:"orderType",key:"orderType",title:"orderType"},{dataIndex:"buyer",key:"buyer",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.buyer.avatarUrl}),t.buyer.name)},title:"Buyer"},{dataIndex:"total",key:"total",title:"Total"},{dataIndex:"state",key:"state",title:"state"},{dataIndex:"createdAt",key:"createdAt",title:"CreatedAt"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:f,dataSource:u,rowKey:"traceId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:a,disabled:!d,onClick:function(){i({variables:{after:m}})}},d?"Load More":"No More")))}function fe(e){var t=se().appId,n=e.itemId,r=e.itemType,a=e.sourceId,l=e.sourceType,i=(0,U.VK)({variables:{itemId:n,itemType:r,sourceId:a,sourceType:l}}),c=i.data,u=i.loading,s=i.fetchMore;if(u)return o.createElement($,null);var d=c.adminTransferConnection,m=d.nodes,f=d.pageInfo,p=f.hasNextPage,y=f.endCursor,E=[{dataIndex:"traceId",key:"traceId",title:"Trace ID"},{dataIndex:"recipient",key:"recipient",render:function(e,n){return n.recipient?o.createElement(J.Z,null,o.createElement(Q.C,{src:n.recipient.avatarUrl}),o.createElement("span",null,n.recipient.name,"(",n.recipient.mixinId,")")):n.opponentId===t?"PRSDigg":n.opponentId},title:"Recipient"},{dataIndex:"amount",key:"amount",render:function(e,t){var n;return o.createElement(J.Z,null,o.createElement(Q.C,{src:null==(n=t.currency)?void 0:n.iconUrl}),o.createElement("span",null,e))},title:"Amount"},{dataIndex:"transferType",key:"transferType",title:"transferType"},{dataIndex:"processedAt",key:"processedAt",render:function(e){return o.createElement("span",null,e||"-")},title:"Processed At"},{dataIndex:"createdAt",key:"createdAt",title:"Created At"},{dataIndex:"snapshotId",key:"snapshotId",render:function(e){return o.createElement("span",null,e?o.createElement("a",{href:"https://mixin.one/snapshots/"+e,target:"_blank"},"View"):"processing")},title:"Snapshot"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:E,dataSource:m,rowKey:"traceId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:u,disabled:!p,onClick:function(){s({variables:{after:y}})}},p?"Load More":"No More")))}function pe(e){var t=e.userId,n=(0,U.R0m)({fetchPolicy:"network-only",variables:{userId:t}}),r=n.loading,a=n.data;if(r)return o.createElement($,null);var l=a.adminWalletBalance,i=[{title:"asset ID",dataIndex:"assetId",key:"assetId"},{dataIndex:"iconUrl",key:"iconUrl",render:function(e,t){return o.createElement(Q.C,{src:e},t.symbol[0])},title:"icon"},{title:"Symbol",dataIndex:"symbol",key:"symbol"},{title:"Balance",dataIndex:"balance",key:"balance"},{dataIndex:"priceUsd",key:"priceUsd",render:function(e,t){return parseFloat(t.balance)>0?"$ "+parseFloat(e)*parseFloat(t.balance):0},title:"Value"}];return o.createElement(_.Z,{scroll:{x:!0},columns:i,dataSource:l,rowKey:"assetId",loading:r,pagination:{pageSize:50}})}function ye(){var e=(0,B.UO)().uuid,t=(0,B.k6)(),n=(0,U.kWA)({variables:{uuid:e}}),r=n.loading,a=n.data;if(r)return o.createElement($,null);var l=a.adminArticle;return o.createElement("div",null,o.createElement(R.Z,{title:l.title,onBack:function(){return t.goBack()}}),o.createElement(Y.Z,{bordered:!0,size:"small"},o.createElement(Y.Z.Item,{label:"Title"},l.title),o.createElement(Y.Z.Item,{label:"Author"},o.createElement(J.Z,null,o.createElement(Q.C,{src:l.author.avatarUrl},l.author.name[0]),l.author.name)),o.createElement(Y.Z.Item,{label:"State"},l.state),o.createElement(Y.Z.Item,{label:"Price"},l.price),o.createElement(Y.Z.Item,{label:"OrdersCount"},l.ordersCount),o.createElement(Y.Z.Item,{label:"Revenue"},l.revenue),o.createElement(Y.Z.Item,{label:"Comments"},l.commentsCount),o.createElement(Y.Z.Item,{label:"createdAt"},l.createdAt)),o.createElement(G.Z,{defaultActiveKey:"orders"},o.createElement(G.Z.TabPane,{tab:"Orders",key:"orders"},o.createElement(me,{itemId:l.id,itemType:"Article"})),o.createElement(G.Z.TabPane,{tab:"Comments",key:"comments"},o.createElement(ce,{commentableId:l.id,commentableType:"Article"})),o.createElement(G.Z.TabPane,{tab:"Snapshots",key:"snapshot"},o.createElement(re,{articleUuid:l.uuid})),o.createElement(G.Z.TabPane,{tab:"Transfers",key:"transfers"},o.createElement(fe,{itemId:l.id,itemType:"Article"})),o.createElement(G.Z.TabPane,{tab:"Wallet Balance",key:"wallet_balance"},l.walletId?o.createElement(pe,{userId:l.walletId}):o.createElement(X.Z,null)),o.createElement(G.Z.TabPane,{tab:"Wallet Snapshots",key:"wallet_snapshots"},l.walletId?o.createElement(de,{userId:l.walletId}):o.createElement(X.Z,null))))}function Ee(){return o.createElement(o.Fragment,null,o.createElement(R.Z,{title:"Article Snapshots"}),o.createElement(re,null))}n(13062);var ve=n(71230),he=(n(89032),n(15746)),Ie=(n(61768),n(8834)),ge=n(47566);function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(){var e=be((0,o.useState)(""),2),t=e[0],n=e[1],r=be((0,o.useState)("published"),2),a=r[0],l=r[1],i=(0,ge.Z)(t,{wait:500});return o.createElement("div",null,o.createElement(R.Z,{title:"Articles"}),o.createElement(ve.Z,{gutter:16,style:{marginBottom:"1rem"}},o.createElement(he.Z,null,o.createElement(Ie.Z,{style:{width:200},value:a,onChange:function(e){return l(e)}},o.createElement(Ie.Z.Option,{value:"published"},"Published"),o.createElement(Ie.Z.Option,{value:"hidden"},"Hidden"),o.createElement(Ie.Z.Option,{value:"blocked"},"Blocked"),o.createElement(Ie.Z.Option,{value:"all"},"All"))),o.createElement(he.Z,null,o.createElement(w.Z,{value:t,placeholder:"Query article",onChange:function(e){return n(e.currentTarget.value)}}))),o.createElement(xe,{query:i,state:a}))}function xe(e){var t=e.query,n=e.state,r=(0,U.IpZ)({variables:{query:t,state:n}}),a=r.data,l=r.loading,i=r.fetchMore,c=be((0,U.IRC)(),2),s=c[0],d=c[1].loading,m=be((0,U.YKD)(),2),f=m[0],p=m[1].loading;if(l)return o.createElement($,null);var y=a.adminArticleConnection,E=y.nodes,v=y.pageInfo,h=v.hasNextPage,I=v.endCursor,g=[{dataIndex:"uuid",key:"uuid",title:"UUID"},{dataIndex:"author",key:"author",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.author.avatarUrl}),t.author.name)},title:"Author"},{dataIndex:"title",key:"title",title:"Title"},{dataIndex:"state",key:"state",title:"State"},{dataIndex:"revenue",key:"revenue",title:"Revenue"},{dataIndex:"commentsCount",key:"commentsCount",title:"Comments"},{dataIndex:"createdAt",key:"createdAt",title:"CreatedAt"},{dataIndex:"actions",key:"actions",render:function(e,t){return o.createElement("span",null,"blocked"===t.state?o.createElement(q.Z,{title:"Are you sure to unblock this article?",onConfirm:function(){return f({variables:{input:{uuid:t.uuid}}})}},o.createElement("a",{className:p?"cursor-not-allowed":"cursor-pointer"},"UnBlock")):o.createElement(q.Z,{title:"Are you sure to block this article?",onConfirm:function(){return s({variables:{input:{uuid:t.uuid}}})}},o.createElement("a",{className:d?"cursor-not-allowed":"cursor-pointer"},"Block")),o.createElement(K.Z,{type:"vertical"}),o.createElement(u.rU,{to:"/articles/"+t.uuid},"Detail"),o.createElement(K.Z,{type:"vertical"}),o.createElement("a",{href:"/articles/"+t.uuid,target:"_blank"},"View"))},title:"Actions"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:g,dataSource:E,rowKey:"uuid",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:l,disabled:!h,onClick:function(){i({variables:{after:I,query:t,state:n}})}},h?"Load More":"No More")))}function ke(){return o.createElement("div",null,o.createElement(R.Z,{title:"Balance"}),o.createElement(pe,null))}n(14564);var Ce=n(48835);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e){var t=e.visible,n=e.onCancel,r=e.editingBonus,a=e.refetchBonuses,l=Oe((0,o.useState)(null),2),i=l[0],c=l[1],u=Oe(S.Z.useForm(),1)[0],s=(0,ge.Z)(i,{wait:500}),d=(0,U.Abh)({notifyOnNetworkStatusChange:!0,variables:{query:s}}),m=d.data,f=d.loading,p=Oe((0,U.yIW)({update:function(e,t){var r=t.data.adminCreateBonus.error;r?T.ZP.error(r):(T.ZP.success("success"),u.resetFields(),a(),n())}}),1)[0],y=Oe((0,U.khX)({update:function(e,t){var r=t.data.adminUpdateBonus.error;r?T.ZP.error(r):(T.ZP.success("success"),u.resetFields(),a(),n())}}),1)[0];(0,o.useEffect)((function(){r?u.setFieldsValue({userId:r.user.id,title:r.title,description:r.description,amount:r.amount}):u.resetFields()}),[r]);var E=m&&m.adminUserConnection.nodes||[];return o.createElement(W.Z,{title:r?"Edit":"New",visible:t,onCancel:n,onOk:function(){return u.submit()}},o.createElement(S.Z,{labelCol:{span:6},form:u,onFinish:function(e){r?y({variables:{input:we(we({},e),{},{id:r.id})}}):p({variables:{input:e}})}},o.createElement(S.Z.Item,{name:"userId",label:"User",rules:[{required:!0}]},o.createElement(Ie.Z,{showSearch:!0,placeholder:"Search user name/mixinId",filterOption:!1,notFoundContent:f?o.createElement(F.Z,{size:"small"}):null,onSearch:function(e){return c(e)}},E.map((function(e){return o.createElement(Ie.Z.Option,{key:e.id,value:e.id},o.createElement(J.Z,null,o.createElement("span",null,e.name),o.createElement("span",null,e.mixinId)))})))),o.createElement(S.Z.Item,{name:"amount",label:"Amount",rules:[{required:!0}]},o.createElement(Ce.Z,{min:1,precision:4,placeholder:"0.0"})),o.createElement(S.Z.Item,{name:"title",label:"Title",rules:[{required:!0}]},o.createElement(w.Z,null)),o.createElement(S.Z.Item,{name:"description",label:"Description"},o.createElement(w.Z.TextArea,null))))}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(){var e=Me((0,o.useState)(!1),2),t=e[0],n=e[1],r=Me((0,o.useState)(null),2),a=r[0],l=r[1],i=(0,U.R3p)(),c=i.data,u=i.loading,s=i.fetchMore,d=i.refetch,m=Me((0,U.XAu)({update:function(e,t){"drafted"!==t.data.adminDeliverBonus.state&&T.ZP.success("Delivered!")}}),1)[0];if(u)return o.createElement($,null);var f=c.adminBonusConnection,p=f.nodes,y=f.pageInfo,E=y.hasNextPage,v=y.endCursor,h=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"user",key:"user",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.user.avatarUrl}),o.createElement("span",null,t.user.name))},title:"User"},{dataIndex:"title",key:"title",title:"Title"},{dataIndex:"description",key:"description",render:function(e){return o.createElement("div",null,e||"-")},title:"Description"},{dataIndex:"amount",key:"amount",title:"Amount"},{dataIndex:"state",key:"state",title:"state"},{dataIndex:"createdAt",key:"createdAt",title:"createdAt"},{dataIndex:"snapshotId",key:"snapshotId",render:function(e,t){return t.transfer&&t.transfer.snapshotId?o.createElement("a",{href:"https://mixin/one/snapshots/"+t.transfer.snapshotId,target:"_blank"},"SnapshotId"):"-"},title:"snapshotId"},{dataIndex:"actions",key:"actions",render:function(e,t){return o.createElement("span",null,o.createElement(q.Z,{disabled:"drafted"!==t.state,title:"Are you sure to deliver bonus to user?",onConfirm:function(){return m({variables:{input:{id:t.id}}})}},o.createElement(C.Z,{type:"link",disabled:"drafted"!==t.state,size:"small"},"Deliver")),o.createElement(K.Z,{type:"vertical"}),o.createElement(C.Z,{disabled:"drafted"!==t.state,onClick:function(){l(t),n(!0)},type:"link",size:"small"},"Edit"))},title:"Actions"}];return o.createElement("div",null,o.createElement(R.Z,{title:"Bonuses"}),o.createElement("div",{style:{marginBottom:"1rem"}},o.createElement(C.Z,{type:"primary",onClick:function(){l(null),n(!0)}},"New"),o.createElement(Pe,{visible:t,editingBonus:a,onCancel:function(){return n(!1)},refetchBonuses:d})),o.createElement(_.Z,{scroll:{x:!0},columns:h,dataSource:p,rowKey:"id",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:u,disabled:!E,onClick:function(){s({variables:{after:v}})}},E?"Load More":"No More")))}function je(){return o.createElement("div",null,o.createElement(R.Z,{title:"Comments"}),o.createElement(ce,null))}function Be(){var e=(0,U.Cxh)(),t=e.data,n=e.loading,r=e.fetchMore;if(n)return o.createElement($,null);var a=t.adminMixinMessageConnection,l=a.nodes,i=a.pageInfo,c=i.hasNextPage,u=i.endCursor,s=[{dataIndex:"action",key:"action",title:"Action"},{dataIndex:"category",key:"category",title:"category"},{dataIndex:"user",key:"user",render:function(e,t){return t.user?o.createElement(J.Z,null,o.createElement(Q.C,{src:t.user.avatarUrl}),t.user.name,t.user.mixinId):t.userId},title:"User"},{dataIndex:"content",key:"content",render:function(e){return o.createElement("div",{style:{maxWidth:"100%"}},e)},title:"content"},{dataIndex:"processedAt",key:"processedAt",title:"processedAt"},{dataIndex:"createdAt",key:"createdAt",title:"createdAt"}];return o.createElement("div",null,o.createElement(R.Z,{title:"Mixin Messages"}),o.createElement(_.Z,{scroll:{x:!0},columns:s,dataSource:l,rowKey:"id",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:n,disabled:!c,onClick:function(){r({variables:{after:u}})}},c?"Load More":"No More")))}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(){var e=_e((0,o.useState)("input"),2),t=e[0],n=e[1];return o.createElement("div",null,o.createElement(R.Z,{title:"Mixin Network Snapshot"}),o.createElement(ve.Z,{gutter:16,style:{marginBottom:"1rem"}},o.createElement(he.Z,null,o.createElement(Ie.Z,{style:{width:200},value:t,onChange:function(e){return n(e)}},o.createElement(Ie.Z.Option,{value:"input"},"Input"),o.createElement(Ie.Z.Option,{value:"output"},"Output"),o.createElement(Ie.Z.Option,{value:"prsdigg"},"PRSDigg"),o.createElement(Ie.Z.Option,{value:"4swap"},"4swap"),o.createElement(Ie.Z.Option,{value:"all"},"All")))),o.createElement(de,{filter:t}))}n(53315);var Re=n(89588),Ke=n(29009),qe=n(20085),Fe=n(3023),$e=n(75358),ze=n(14195),He=n(99307),Ve=n(90827);function Xe(){var e=(0,U.yFU)(),t=e.data;if(e.loading)return o.createElement($,null);var n=t.statistics,r=n.usersCount,a=n.articlesCount,l=n.authorRevenueTotal,i=n.readerRevenueTotal;return o.createElement("div",null,o.createElement(R.Z,{title:"Dashboard"}),o.createElement(ve.Z,{style:{padding:20,textAlign:"center"},gutter:16,justify:"space-around"},o.createElement(he.Z,{span:12},o.createElement(Re.Z,{title:"\u7528\u6237\u603b\u91cf",value:r})),o.createElement(he.Z,{span:12},o.createElement(Re.Z,{title:"\u6587\u7ae0\u603b\u6570",value:a})),o.createElement(he.Z,{span:12},o.createElement(Re.Z,{title:"\u4f5c\u8005\u6536\u76ca(USD)",value:l.toFixed(2)})),o.createElement(he.Z,{span:12},o.createElement(Re.Z,{title:"\u8bfb\u8005\u6536\u76ca(USD)",value:i.toFixed(2)}))),o.createElement(Ge,null),o.createElement(Je,null),o.createElement(Qe,null))}function Ge(){var e=(0,U.uyx)(),t=e.loading,n=e.data;if(t)return o.createElement($,null);var r=n.userChart;try{r=JSON.parse(r)}catch(a){r=[]}return o.createElement("div",null,o.createElement("h3",null,"User Increasing Chart"),o.createElement(Ye,{data:r}))}function Je(){var e=(0,U.Bob)(),t=e.loading,n=e.data;if(t)return o.createElement($,null);var r=n.articleChart;try{r=JSON.parse(r)}catch(a){r=[]}return o.createElement("div",null,o.createElement("h3",null,"Article Increasing Chart"),o.createElement(Ye,{data:r}))}function Qe(){var e=(0,U.Jfc)(),t=e.loading,n=e.data;if(t)return o.createElement($,null);var r=n.revenueChart;try{r=JSON.parse(r)}catch(a){r=[]}return o.createElement("div",null,o.createElement("h3",null,"Revenue Chart"),o.createElement(Ye,{data:r}))}function Ye(e){return o.createElement(Ke.h,{height:250},o.createElement(qe.T,{data:e.data,margin:{top:10,right:30,left:0,bottom:0}},o.createElement("defs",null,o.createElement("linearGradient",{id:"colorUser",x1:"0",y1:"0",x2:"0",y2:"1"},o.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),o.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0}))),o.createElement(Fe.K,{dataKey:"name"}),o.createElement($e.B,null),o.createElement(ze.q,{strokeDasharray:"3 3"}),o.createElement(He.u,null),o.createElement(Ve.u,{type:"monotone",dataKey:"value",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorUser)"})))}function et(){var e=(0,U.s1B)(),t=e.data,n=e.loading,r=e.fetchMore;if(n)return o.createElement($,null);var a=t.adminPaymentConnection,l=a.nodes,i=a.pageInfo,c=i.hasNextPage,u=i.endCursor,s=[{dataIndex:"traceId",key:"traceId",title:"Trace ID"},{dataIndex:"payer",key:"payer",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.payer.avatarUrl}),o.createElement("span",null,t.payer.name,"(",t.payer.mixinId,")"))},title:"Author"},{dataIndex:"amount",key:"amount",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.currency.iconUrl}),o.createElement("span",null,e))},title:"Amount"},{dataIndex:"state",key:"state",title:"state"},{dataIndex:"orderType",key:"orderType",render:function(e,t){return o.createElement("span",null,t.order?t.order.orderType:"-")},title:"orderType"},{dataIndex:"createdAt",key:"createdAt",title:"Created At"},{dataIndex:"snapshotId",key:"snapshotId",render:function(e){return o.createElement("a",{href:"https://mixin.one/snapshots/"+e,target:"_blank"},"View")},title:"Snapshot"}];return o.createElement("div",null,o.createElement(R.Z,{title:"Payments"}),o.createElement(_.Z,{scroll:{x:!0},columns:s,dataSource:l,rowKey:"traceId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:n,disabled:!c,onClick:function(){r({variables:{after:u}})}},c?"Load More":"No More")))}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(){var e=tt((0,o.useState)(""),2),t=e[0],n=e[1],r=tt((0,o.useState)("all"),2),a=r[0],l=r[1],i=(0,ge.Z)(t,{wait:500});return o.createElement(o.Fragment,null,o.createElement(R.Z,{title:"Prs Accounts"}),o.createElement("div",{className:"flex mb-4 space-x-4"},o.createElement(Ie.Z,{className:"w-72",value:a,onChange:function(e){return l(e)}},o.createElement(Ie.Z.Option,{value:"all"},"All"),o.createElement(Ie.Z.Option,{value:"created"},"Created"),o.createElement(Ie.Z.Option,{value:"registered"},"Registered"),o.createElement(Ie.Z.Option,{value:"allowing"},"Allowing"),o.createElement(Ie.Z.Option,{value:"allowed"},"Allowed"),o.createElement(Ie.Z.Option,{value:"denying"},"Denying"),o.createElement(Ie.Z.Option,{value:"denied"},"Denied")),o.createElement(w.Z,{className:"w-72",value:t,placeholder:"account/name/mixinId",onChange:function(e){return n(e.currentTarget.value)}})),o.createElement(at,{query:i,status:a}))}function at(e){var t=e.query,n=e.status,r=(0,U.SMG)({variables:{query:t,status:n}}),a=r.data,l=r.loading,i=r.fetchMore;if(l)return o.createElement($,null);var c=a.adminPrsAccountConnection,u=c.nodes,s=c.pageInfo,d=s.hasNextPage,m=s.endCursor,f=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"account",key:"account",render:function(e){return e||"-"},title:"Account"},{dataIndex:"user",key:"user",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.user.avatarUrl}),o.createElement("span",null,t.user.name,"(",t.user.mixinId,")"))},title:"User"},{dataIndex:"status",key:"status",title:"Status"},{dataIndex:"createdAt",key:"createdAt",title:"Created At"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:f,dataSource:u,rowKey:"id",pagination:!1,size:"small"}),o.createElement("div",{className:"mb-4 text-center"},o.createElement(C.Z,{type:"link",loading:l,disabled:!d,onClick:function(){i({variables:{status:n,query:t,after:m}})}},d?"Load More":"No More")))}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(){var e=lt((0,o.useState)("all"),2),t=e[0],n=e[1];return o.createElement(o.Fragment,null,o.createElement(R.Z,{title:"Prs Transactions"}),o.createElement("div",{className:"flex mb-4 space-x-4"},o.createElement(Ie.Z,{className:"w-72",value:t,onChange:function(e){return n(e)}},o.createElement(Ie.Z.Option,{value:"all"},"All"),o.createElement(Ie.Z.Option,{value:"ArticleSnapshotPrsTransaction"},"Article"),o.createElement(Ie.Z.Option,{value:"PrsAccountAuthorizationTransaction"},"Authorization"))),o.createElement(ot,{type:t}))}function ot(e){var t=e.type,n=(0,U.pzo)({variables:{type:t}}),r=n.data,a=n.loading,l=n.fetchMore;if(a)return o.createElement($,null);var i=r.adminPrsTransactionConnection,c=i.nodes,u=i.pageInfo,s=u.hasNextPage,d=u.endCursor,m=[{dataIndex:"id",key:"id",title:"ID"},{dataIndex:"type",key:"type",title:"type"},{dataIndex:"userAddress",key:"userAddress",render:function(e,t){return t.userAddress||"-"},title:"userAddress"},{dataIndex:"user",key:"user",render:function(e,t){return o.createElement(o.Fragment,null,t.prsAccount?o.createElement("span",null,t.prsAccount.user.name,"(",t.prsAccount.user.mixinId,")"):"-")},title:"User"},{dataIndex:"data",key:"data",title:"data"},{dataIndex:"processedAt",key:"processedAt",title:"Processed At"},{dataIndex:"createdAt",key:"createdAt",title:"Created At"}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:m,dataSource:c,rowKey:"id",pagination:!1,size:"small"}),o.createElement("div",{className:"mb-4 text-center"},o.createElement(C.Z,{type:"link",loading:a,disabled:!s,onClick:function(){l({variables:{type:t,after:d}})}},s?"Load More":"No More")))}function ut(){var e=(0,U.LCA)(),t=e.data,n=e.loading,r=e.fetchMore;if(n)return o.createElement($,null);var a=t.adminSwapOrderConnection,l=a.nodes,i=a.pageInfo,c=i.hasNextPage,u=i.endCursor,s=[{dataIndex:"traceId",key:"traceId",title:"Trace ID"},{dataIndex:"payer",key:"payer",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.payer.avatarUrl}),o.createElement("span",null,t.payer.name),o.createElement("span",null,"(",t.payer.mixinId,")"))},title:"Payer"},{dataIndex:"state",key:"state",title:"State"},{dataIndex:"funds",key:"funds",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.payAsset.iconUrl}),o.createElement("span",null,e))},title:"funds"},{dataIndex:"amount",key:"amount",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.fillAsset.iconUrl}),o.createElement("span",null,e||"-"))},title:"amount"},{dataIndex:"minAmount",key:"minAmount",render:function(e){return e||"-"},title:"minAmount"},{dataIndex:"createdAt",key:"createdAt",title:"createdAt"}];return o.createElement("div",null,o.createElement(R.Z,{title:"Swap Orders"}),o.createElement(_.Z,{scroll:{x:!0},dataSource:l,columns:s,rowKey:"traceId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:n,disabled:!c,onClick:function(){r({variables:{after:u}})}},c?"Load More":"No More")))}function st(){return o.createElement("div",null,o.createElement(R.Z,{title:"Transfers"}),o.createElement(fe,null))}function dt(){var e=(0,B.UO)().mixinId,t=(0,U.Prh)({variables:{mixinId:e}}),n=t.loading,r=t.data;if(n)return o.createElement($,null);var a=r.adminUser;return o.createElement("div",null,o.createElement(R.Z,{title:"Users"}),o.createElement(Y.Z,{bordered:!0,size:"small"},o.createElement(Y.Z.Item,{label:"Name"},o.createElement(J.Z,null,o.createElement(Q.C,{src:a.avatarUrl}),a.name)),o.createElement(Y.Z.Item,{label:"MixinId"},a.mixinId),o.createElement(Y.Z.Item,{label:"Articles Count"},a.statistics.articlesCount),o.createElement(Y.Z.Item,{label:"Author Revenue Amount(USD)"},a.statistics.authorRevenueTotalUsd),o.createElement(Y.Z.Item,{label:"Reader Revenue Amount(USD)"},a.statistics.readerRevenueTotalUsd)),o.createElement(G.Z,{defaultActiveKey:"wallet_balance"},o.createElement(G.Z.TabPane,{tab:"Wallet Balance",key:"wallet_balance"},a.walletId?o.createElement(pe,{userId:a.walletId}):o.createElement(X.Z,null)),o.createElement(G.Z.TabPane,{tab:"Wallet Snapshots",key:"wallet_snapshots"},a.walletId?o.createElement(de,{userId:a.walletId}):o.createElement(X.Z,null))))}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,l=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(){var e=mt((0,o.useState)(""),2),t=e[0],n=e[1],r=mt((0,o.useState)("default"),2),a=r[0],l=r[1],i=mt((0,o.useState)("without_banned"),2),c=i[0],u=i[1],s=(0,ge.Z)(t,{wait:500});return o.createElement("div",null,o.createElement(R.Z,{title:"Users"}),o.createElement(ve.Z,{gutter:16,style:{marginBottom:"1rem"}},o.createElement(he.Z,null,o.createElement(Ie.Z,{style:{width:200},value:a,onChange:function(e){return l(e)}},o.createElement(Ie.Z.Option,{value:"default"},"Default Order"),o.createElement(Ie.Z.Option,{value:"revenue_total"},"Revenue Total DESC"),o.createElement(Ie.Z.Option,{value:"payment_total"},"Payment Total DESC"),o.createElement(Ie.Z.Option,{value:"articles_count"},"Articles Count DESC"),o.createElement(Ie.Z.Option,{value:"comments_count"},"Comments Count DESC"))),o.createElement(he.Z,null,o.createElement(Ie.Z,{style:{width:200},value:c,onChange:function(e){return u(e)}},o.createElement(Ie.Z.Option,{value:"without_banned"},"Without Banned"),o.createElement(Ie.Z.Option,{value:"only_banned"},"Only Banned"),o.createElement(Ie.Z.Option,{value:"all"},"All"))),o.createElement(he.Z,null,o.createElement(w.Z,{value:t,placeholder:"Query user name/mixinId",onChange:function(e){return n(e.currentTarget.value)}}))),o.createElement(yt,{orderBy:a,query:s,filter:c}))}function yt(e){var t=e.query,n=e.orderBy,r=e.filter,a=(0,U.Abh)({variables:{query:t,orderBy:n,filter:r}}),l=a.data,i=a.loading,c=a.fetchMore,s=mt((0,U.L2O)(),1)[0],d=mt((0,U.CL9)(),1)[0];if(i)return o.createElement($,null);var m=l.adminUserConnection,f=m.nodes,p=m.pageInfo,y=p.hasNextPage,E=p.endCursor,v=[{dataIndex:"mixinId",key:"mixinId",render:function(e,t){return o.createElement(ee.Z,{title:"mixin UUID",content:t.mixinUuid},e)},title:"Mixin ID"},{dataIndex:"name",key:"name",render:function(e,t){return o.createElement(J.Z,null,o.createElement(Q.C,{src:t.avatarUrl}),e)},title:"Name"},{dataIndex:"articlesCount",key:"articlesCount",render:function(e,t){return t.statistics.articlesCount},title:"Articles"},{dataIndex:"commentsCount",key:"commentsCount",render:function(e,t){return t.statistics.commentsCount},title:"Comments"},{dataIndex:"revenueTotal",key:"revenueTotal",render:function(e,t){return t.statistics.revenueTotalUsd.toFixed(2)},title:"Revenue Total"},{dataIndex:"paymentTotal",key:"paymentTotal",render:function(e,t){return t.statistics.paymentTotalUsd.toFixed(2)},title:"Payment Total"},{dataIndex:"bannedAt",key:"bannedAt",render:function(e){return e||"-"},title:"Banned At"},{dataIndex:"createdAt",key:"createdAt",title:"Created At"},{dataIndex:"Actions",key:"actions",render:function(e,t){return o.createElement("span",null,o.createElement(u.rU,{to:"/users/"+t.mixinId},"Detail"),o.createElement(K.Z,{type:"vertical"}),o.createElement("span",null,t.bannedAt?o.createElement(q.Z,{title:"Are you sure to unBan this user?",onConfirm:function(){return d({variables:{input:{id:t.id}}})}},o.createElement(C.Z,{type:"link"},"unBan")):o.createElement(q.Z,{title:"Are you sure to BAN this user?",onConfirm:function(){return s({variables:{input:{id:t.id}}})}},o.createElement(C.Z,{type:"link"},"Ban"))))}}];return o.createElement("div",null,o.createElement(_.Z,{scroll:{x:!0},columns:v,dataSource:f,rowKey:"mixinId",pagination:!1}),o.createElement("div",{style:{margin:"1rem",textAlign:"center"}},o.createElement(C.Z,{type:"link",loading:i,disabled:!y,onClick:function(){c({variables:{filter:r,query:t,orderBy:n,after:E}})}},y?"Load More":"No More")))}function Et(){return o.createElement(B.rs,null,o.createElement(B.AW,{path:"/",exact:!0},o.createElement(Xe,null)),o.createElement(B.AW,{path:"/users",exact:!0},o.createElement(pt,null)),o.createElement(B.AW,{path:"/users/:mixinId",exact:!0},o.createElement(dt,null)),o.createElement(B.AW,{path:"/articles",exact:!0},o.createElement(Ae,null)),o.createElement(B.AW,{path:"/article_snapshots",exact:!0},o.createElement(Ee,null)),o.createElement(B.AW,{path:"/articles/:uuid",exact:!0},o.createElement(ye,null)),o.createElement(B.AW,{path:"/comments",exact:!0},o.createElement(je,null)),o.createElement(B.AW,{path:"/payments",exact:!0},o.createElement(et,null)),o.createElement(B.AW,{path:"/swap_orders",exact:!0},o.createElement(ut,null)),o.createElement(B.AW,{path:"/transfers",exact:!0},o.createElement(st,null)),o.createElement(B.AW,{path:"/mixin_messages",exact:!0},o.createElement(Be,null)),o.createElement(B.AW,{path:"/mixin_network_snapshots",exact:!0},o.createElement(Le,null)),o.createElement(B.AW,{path:"/announcements",exact:!0},o.createElement(V,null)),o.createElement(B.AW,{path:"/prs_accounts",exact:!0},o.createElement(rt,null)),o.createElement(B.AW,{path:"/prs_transactions",exact:!0},o.createElement(ct,null)),o.createElement(B.AW,{path:"/bonuses",exact:!0},o.createElement(De,null)),o.createElement(B.AW,{path:"/balance",exact:!0},o.createElement(ke,null)),o.createElement(B.AW,null,o.createElement(j.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:o.createElement(u.rU,{to:"/"},o.createElement(C.Z,{type:"primary"},"Back Home"))})))}a().register({AdminApp:function(e){var t=e.csrfToken,n=e.currentAdmin,r=e.prsdigg;return o.createElement(i.ApolloProvider,{client:(0,c.l8)("/graphql",t)},n?o.createElement(ue.Provider,{value:r},o.createElement(oe.Provider,{value:n},o.createElement(u.VK,{basename:"/admin"},o.createElement(l.Z,{style:{minHeight:"100vh"}},o.createElement(l.Z.Sider,{collapsible:!0},o.createElement(k,null)),o.createElement(l.Z.Content,{style:{padding:"0 1rem",background:"#fff"}},o.createElement(Et,null)))))):o.createElement(D,null))}})}},function(e){"use strict";e.O(0,[2416,2235,1925,3101,477,8977,8158,5077,6037,3013,9292,8621,4590,1786,6082,1996,8574],(function(){return t=16487,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=admin-4823672336ff7b72cac1.js.map