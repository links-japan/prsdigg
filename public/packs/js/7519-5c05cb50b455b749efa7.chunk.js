(self.webpackChunkprsdigg=self.webpackChunkprsdigg||[]).push([[7519],{49101:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},l=r(30076),c=function(e,t){return n.createElement(l.Z,Object.assign({},e,{ref:t,icon:a}))};c.displayName="PlusOutlined";var o=n.forwardRef(c)},60331:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(96156),a=r(22122),l=r(28481),c=r(67294),o=r(94184),i=r.n(o),u=r(98423),s=r(54549),f=r(65632),m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},d=function(e){var t,r=e.prefixCls,l=e.className,o=e.checked,u=e.onChange,s=e.onClick,d=m(e,["prefixCls","className","checked","onChange","onClick"]),p=(0,c.useContext(f.E_).getPrefixCls)("tag",r),y=i()(p,(t={},(0,n.Z)(t,"".concat(p,"-checkable"),!0),(0,n.Z)(t,"".concat(p,"-checkable-checked"),o),t),l);return c.createElement("span",(0,a.Z)({},d,{className:y,onClick:function(e){null===u||void 0===u||u(!o),null===s||void 0===s||s(e)}}))},p=r(98787),y=r(58972),b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},g=new RegExp("^(".concat(p.Y.join("|"),")(-inverse)?$")),h=new RegExp("^(".concat(p.E.join("|"),")$")),v=function(e,t){var r,o=e.prefixCls,m=e.className,d=e.style,p=e.children,v=e.icon,E=e.color,Z=e.onClose,C=e.closeIcon,w=e.closable,N=void 0!==w&&w,k=b(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),O=c.useContext(f.E_),x=O.getPrefixCls,S=O.direction,I=c.useState(!0),P=(0,l.Z)(I,2),A=P[0],j=P[1];c.useEffect((function(){"visible"in k&&j(k.visible)}),[k.visible]);var _=function(){return!!E&&(g.test(E)||h.test(E))},q=(0,a.Z)({backgroundColor:E&&!_()?E:void 0},d),T=_(),R=x("tag",o),F=i()(R,(r={},(0,n.Z)(r,"".concat(R,"-").concat(E),T),(0,n.Z)(r,"".concat(R,"-has-color"),E&&!T),(0,n.Z)(r,"".concat(R,"-hidden"),!A),(0,n.Z)(r,"".concat(R,"-rtl"),"rtl"===S),r),m),U=function(e){e.stopPropagation(),null===Z||void 0===Z||Z(e),e.defaultPrevented||"visible"in k||j(!1)},z="onClick"in k||p&&"a"===p.type,V=(0,u.Z)(k,["visible"]),$=v||null,M=$?c.createElement(c.Fragment,null,$,c.createElement("span",null,p)):p,B=c.createElement("span",(0,a.Z)({},V,{ref:t,className:F,style:q}),M,N?C?c.createElement("span",{className:"".concat(R,"-close-icon"),onClick:U},C):c.createElement(s.Z,{className:"".concat(R,"-close-icon"),onClick:U}):null);return z?c.createElement(y.Z,null,B):B},E=c.forwardRef(v);E.displayName="Tag",E.CheckableTag=d;var Z=E},3829:function(e,t,r){"use strict";r(39992)},43069:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});r(74407);var n=r(31097),a=(r(3829),r(60331)),l=(r(39200),r(32787)),c=r(49101),o=r(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,l=[],c=!0,o=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);c=!0);}catch(i){o=!0,a=i}finally{try{c||null==r.return||r.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var t=e.tags,r=e.setTags,u=i((0,o.useState)(!1),2),s=u[0],f=u[1],m=i((0,o.useState)(""),2),d=m[0],p=m[1],y=i((0,o.useState)(-1),2),b=y[0],g=y[1],h=i((0,o.useState)(""),2),v=h[0],E=h[1],Z=(0,o.useRef)(null),C=(0,o.useRef)(null);(0,o.useEffect)((function(){s&&Z.current.focus()}),[s]),(0,o.useEffect)((function(){-1!==b&&C.current.focus()}),[b]);var w=function(){d&&-1===t.indexOf(d)&&r([].concat(t,[d])),p(""),f(!1)},N=function(){var e=[].concat(t);e[b]=v,r(e),E(""),g(-1)};return o.createElement("div",null,t.map((function(e,c){if(b===c)return o.createElement(l.Z,{ref:C,style:{width:78,marginRight:8,verticalAlign:"top"},size:"small",key:e,value:v,onChange:function(e){return E(e.target.value)},onBlur:N,onPressEnter:N});var i=e.length>20,u=o.createElement(a.Z,{key:e,closable:!0,onClose:function(){return n=e,r(t.filter((function(e){return e!==n})));var n}},o.createElement("span",{onDoubleClick:function(t){0!==c&&(g(c),E(e),C.current.focus(),t.preventDefault())}},"#",i?e.slice(0,20)+"...":e));return i?o.createElement(n.Z,{title:e,key:e},u):u})),s&&o.createElement(l.Z,{ref:Z,style:{width:78,marginRight:8,verticalAlign:"top"},size:"small",type:"text",value:d,onChange:function(e){return p(e.target.value)},onBlur:w,onPressEnter:w}),!s&&o.createElement(a.Z,{style:{background:"#fff",borderStyle:"dashed"},onClick:function(){return f(!0)}},o.createElement(c.Z,null)," New Tag"))}},56831:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});r(58481);var n=r(48086),a=r(57210),l=r(67294);function c(e){return l.createElement("input",{className:"hidden",id:"upload-image-input",type:"file",accept:"image/*",multiple:!0,onChange:function(t){Array.from(t.target.files).forEach((function(t){n.ZP.loading("..."),(0,a.ws)(t,(function(t){e.callback(t),n.ZP.destroy()}))}))}})}},17519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});r(67167);var n=r(71577),a=(r(61768),r(8834)),l=(r(51872),r(19650)),c=(r(75257),r(51890)),o=(r(14564),r(48835)),i=(r(39200),r(32787)),u=(r(945),r(57016)),s=(r(13816),r(37744)),f=(r(58481),r(48086)),m=(r(38319),r(86585)),d=r(12104),p=r(67823),y=r(57210),b=r(39387),g=r(67294),h=r(64478),v=r(5977),E=r(73727),Z=r(43069),C=r(56831);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,l=[],c=!0,o=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);c=!0);}catch(i){o=!0,a=i}finally{try{c||null==r.return||r.return()}finally{if(o)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(){var e=(0,v.UO)().uuid,t=w(m.Z.useForm(),1)[0],r=w((0,g.useState)(0),2),N=r[0],k=r[1],O=(0,v.k6)(),x=(0,h.$)().t,S=w((0,g.useState)([]),2),I=S[0],P=S[1],A=(0,b.YVq)({fetchPolicy:"network-only",variables:{uuid:e}}),j=A.data,_=A.loading,q=w((0,b.Mq1)({update:function(t,r){var n=r.data.updateArticle.error;n?f.ZP.error(n):(f.ZP.success(x("success_submitted")),O.replace("/articles/"+e))}}),2),T=q[0],R=q[1].loading;if((0,g.useEffect)((function(){var e;P((null==j||null==(e=j.myArticle)?void 0:e.tagNames)||[])}),[j]),_)return g.createElement(p.Z,null);var F=j.myArticle;return g.createElement("div",null,g.createElement(s.Z,{title:x("edit_article"),breadcrumb:{routes:[{path:"/articles",breadcrumbName:x("articles_manage")},{path:"/articles/"+e,breadcrumbName:F.title},{path:"",breadcrumbName:x("edit_article")}],itemRender:function(e,t,r,n){return r.indexOf(e)===r.length-1?g.createElement("span",null,e.breadcrumbName):g.createElement(E.rU,{to:e.path},e.breadcrumbName)}}}),g.createElement(C.Z,{callback:function(e){t.setFieldsValue({content:t.getFieldValue("content")+"\n!["+e.filename+"]("+e.url+")\n"})}}),g.createElement(m.Z,{form:t,initialValues:{uuid:e,title:F.title,intro:F.intro,content:F.content,price:F.price,assetId:F.assetId},labelCol:{span:2},wrapperCol:{span:22},onFinish:function(e){var t=e.uuid,r=e.title,n=e.content,a=e.price,l=e.intro;r&&n&&a&&l?u.Z.confirm({title:x("article.form.confirm_to_update"),centered:!0,okText:x("update"),cancelText:x("later"),onOk:function(){return T({variables:{input:{uuid:t,title:r,content:n,price:a,intro:l,tagNames:I}}})}}):f.ZP.warn(x("article.form.warning"))}},g.createElement(m.Z.Item,{style:{display:"none"},name:"uuid"},g.createElement(i.Z,null)),g.createElement(m.Z.Item,{label:x("article.title"),name:"title"},g.createElement(i.Z,{placeholder:x("article.form.title_place_holder")})),g.createElement(m.Z.Item,{label:x("article.content"),name:"content"},g.createElement(d.ZP,{textareaProps:{placeholder:x("article.form.content_place_holder")},previewOptions:{plugins:y.dx,renderers:y.u4},autoFocus:!1,preview:"edit",height:500,commands:[d.CN.Se,d.CN.pU,d.CN.mW,d.CN.hr,d.CN.TN,d.CN.qE,d.CN.p4,d.CN.TU,y.H7,d.CN.qE,d.CN.GH,d.CN.Vf]})),g.createElement(m.Z.Item,{label:x("article.intro"),name:"intro"},g.createElement(i.Z.TextArea,{placeholder:x("article.form.intro_place_holder")})),g.createElement(m.Z.Item,{label:x("article.tags")},g.createElement(Z.Z,{tags:I,setTags:P})),g.createElement(m.Z.Item,{label:x("article.price"),extra:"\u2248 $"+(F.currency.priceUsd*(N||F.price)).toFixed(4)},g.createElement(l.Z,null,g.createElement(m.Z.Item,{name:"price",noStyle:!0,rules:[{required:!0},{validator:function(e,t){return"BTC"===F.currency.symbol&&t>=1e-6||"PRS"===F.currency.symbol&&t>=1?Promise.resolve():Promise.reject(x("article.form.price_is_too_low"))}}]},g.createElement(o.Z,{onChange:function(e){return k(parseFloat(e.toString()))},style:{minWidth:130},min:1e-6,step:"0.000001",precision:6,placeholder:"0.0"})),g.createElement(m.Z.Item,{name:"assetId",noStyle:!0,rules:[{required:!0}]},g.createElement(a.Z,{disabled:!0},g.createElement(a.Z.Option,{key:F.currency.assetId,value:F.currency.assetId},g.createElement(l.Z,null,g.createElement(c.C,{size:"small",src:F.currency.iconUrl}),F.currency.symbol)))))),g.createElement(m.Z.Item,{wrapperCol:{xs:{offset:0},sm:{offset:2}}},g.createElement(n.Z,{size:"large",type:"primary",htmlType:"submit",loading:R},x("update")))))}}}]);
//# sourceMappingURL=7519-5c05cb50b455b749efa7.chunk.js.map